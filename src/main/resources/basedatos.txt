CREATE DATABASE curso_induccion;

USE curso_induccion;

CREATE TABLE MATERIAS (
    id_materia INT (2) PRIMARY KEY auto_increment,
    nombre VARCHAR(255),
    descripcion VARCHAR(255)
);
insert into materias values (1,"Calculo","Aprender a manejar las ecuaciones"),(2,"Ingles","Saber los conocimientos basicos de ingles"),(3,"Programacion","Saber hacer lo basico de algunos lenguajes");

CREATE TABLE ASPIRANTES (
    id_aspirante INT (5) PRIMARY KEY auto_increment,
    nombre VARCHAR(255),
    apellidos VARCHAR(255),
    correo VARCHAR(255),
    telefono INT (20),
    curp VARCHAR(18)
);

CREATE TABLE ROL(
    id_rol INT (1) PRIMARY KEY,
    nombre VARCHAR (255),
    descripcion VARCHAR (255)
);
insert into rol values (1,"Administrador","Tiene mas herramientas que el docente"),(2,"Docente","Esta limitado a hacer ciertas cosas");

CREATE TABLE USUARIOS (
    id_usuario INT (10) PRIMARY KEY auto_increment,
    nombre VARCHAR(255),
    apellidos VARCHAR(255),
    correo VARCHAR(255),
    contra VARCHAR(255),
    telefono INT (20),
    curp VARCHAR (18),
    estatus INT (1),
    id_rol INT (1),
    codigo varchar(20),
    FOREIGN KEY (id_rol) REFERENCES ROL(id_rol) ON DELETE CASCADE
);

CREATE TABLE MATERIAS_USUARIOS (
    id_materia INT (2),
    id_usuario INT (10),
    descripcion VARCHAR(255),
    FOREIGN KEY (id_materia) REFERENCES MATERIAS(id_materia) ON DELETE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES USUARIOS(id_usuario) ON DELETE CASCADE
);

CREATE TABLE GRUPOS (
    id_grupo INT (2) PRIMARY KEY auto_increment,
    letra VARCHAR(5),
    cantidad INT (2)
);

CREATE TABLE GRUPO_ASPIRANTE(
    id_grupo INT (2),
    letra VARCHAR(5),

    id_aspirante INT (5),
    nombreA VARCHAR(255),
    apellidosA VARCHAR(255),
    correoA VARCHAR(255),

    id_usuario INT (10),
    nombreU VARCHAR(255),
    apellidosU VARCHAR(255),
    correoU VARCHAR(255),
    
    id_materia INT (2),
    nombreM VARCHAR(255),

    FOREIGN KEY (id_grupo) REFERENCES GRUPOS(id_grupo) ON DELETE CASCADE,
    FOREIGN KEY (id_aspirante) REFERENCES ASPIRANTES(id_aspirante) ON DELETE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES USUARIOS(id_usuario) ON DELETE CASCADE,
    FOREIGN KEY (id_materia) REFERENCES MATERIAS(id_materia) ON DELETE CASCADE
);

CREATE TABLE CALIFICACIONES (
    id_calificacion INT (2) PRIMARY KEY auto_increment,
    id_materia INT (2),
    nombreM VARCHAR(255),

    id_grupo INT (2),
    letra VARCHAR(5),

    id_usuario INT (10),
    nombreU VARCHAR(255),
    apellidosU VARCHAR(255),        

    id_aspirante INT (5),
    nombreA VARCHAR(255),
    apellidosA VARCHAR(255),

    calificacion DECIMAL(5, 2),

    FOREIGN KEY (id_materia) REFERENCES MATERIAS(id_materia) ON DELETE CASCADE,
    FOREIGN KEY (id_grupo) REFERENCES GRUPOS(id_grupo) ON DELETE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES USUARIOS(id_usuario) ON DELETE CASCADE,
    FOREIGN KEY (id_aspirante) REFERENCES ASPIRANTES(id_aspirante) ON DELETE CASCADE
);
